(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(13)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(3),o=n.n(l),i=(n(11),n(1)),c=n(4),u=(n(12),{none:{display:"none"},up:{display:"inline-block",padding:"10px",transform:"rotate(-90deg)"},down:{display:"inline-block",padding:"10px",transform:"rotate(90deg)"}}),s=u.none;function m(e){switch(e.sorting){case"desc":s=u.up;break;case"asc":s=u.down;break;default:s=u.none}return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{style:s},">"))}var d={header:{cursor:"pointer",backgroundColor:"black"}},g="City";function f(e){var t=e.state,n=e.handleSorting;if(t.isMobile)switch(t.mobileColumn){case"city":g="City";break;case"parameter":g="Parameter";break;case"value":g="Value";break;case"unit":g="Unit";break;default:g="City"}return t.isMobile?r.a.createElement(r.a.Fragment,null,r.a.createElement("th",{style:d.header,onClick:function(){return n("code")}},"Country code","code"===t.sortingKey?r.a.createElement(m,{sorting:t.sorting}):null),r.a.createElement("th",{style:d.header,onClick:function(){return n("name")}},"Name","name"===t.sortingKey?r.a.createElement(m,{sorting:t.sorting}):null),r.a.createElement("th",{style:d.header,onClick:function(){return n(t.mobileColumn)}},g,t.sortingKey===t.mobileColumn?r.a.createElement(m,{sorting:t.sorting}):null)):r.a.createElement(r.a.Fragment,null,r.a.createElement("th",{style:d.header,onClick:function(){return n("code")}},"Country Code","code"===t.sortingKey?r.a.createElement(m,{sorting:t.sorting}):null),r.a.createElement("th",{style:d.header,onClick:function(){return n("name")}},"Name","name"===t.sortingKey?r.a.createElement(m,{sorting:t.sorting}):null),r.a.createElement("th",{style:d.header,onClick:function(){return n("city")}},"City","city"===t.sortingKey?r.a.createElement(m,{sorting:t.sorting}):null),r.a.createElement("th",{style:d.header,onClick:function(){return n("parameter")}},"Parameter","parameter"===t.sortingKey?r.a.createElement(m,{sorting:t.sorting}):null),r.a.createElement("th",{style:d.header,onClick:function(){return n("value")}},"Value","value"===t.sortingKey?r.a.createElement(m,{sorting:t.sorting}):null),r.a.createElement("th",{style:d.header,onClick:function(){return n("unit")}},"Unit","unit"===t.sortingKey?r.a.createElement(m,{sorting:t.sorting}):null))}var b={footerBtns:{textAlign:"center",cursor:"pointer",backgroundColor:"black"},footerPage:{textAlign:"center",backgroundColor:"black"}};function h(e){var t=e.handlePagination,n=e.state;return r.a.createElement(r.a.Fragment,null,r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",{style:b.footerBtns,onClick:function(){return t("prev")},colSpan:n.isMobile?"1":"2"},"Previous"),r.a.createElement("td",{style:b.footerPage,colSpan:n.isMobile?"1":"2"},"Page: ",n.pageEnd/10),r.a.createElement("td",{style:b.footerBtns,onClick:function(){return t("next")},colSpan:n.isMobile?"1":"2"},"Next"))))}function p(e){var t=e.handleSearch;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement("label",null,"Search:",r.a.createElement("input",{onKeyUp:function(e){return t(e)}}))))}var E={mobileBtns:{cursor:"pointer",backgroundColor:"#282c34",color:"white",width:"35vw",height:"50px",padding:"2px",fontSize:"20px"},btnSelected:{backgroundColor:"black",color:"white",width:"35vw",height:"50px",padding:"2px",fontSize:"20px"}};function y(e){var t=e.handleMobileColumn,n=e.state;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("button",{style:"city"===n.mobileColumn?E.btnSelected:E.mobileBtns,onClick:function(){return t("city")}},"City"),r.a.createElement("button",{style:"parameter"===n.mobileColumn?E.btnSelected:E.mobileBtns,onClick:function(){return t("parameter")}},"Parameter")),r.a.createElement("div",null,r.a.createElement("button",{style:"value"===n.mobileColumn?E.btnSelected:E.mobileBtns,onClick:function(){return t("value")}},"Value"),r.a.createElement("button",{style:"unit"===n.mobileColumn?E.btnSelected:E.mobileBtns,onClick:function(){return t("unit")}},"Unit")))}var v={table:{width:"90vw"},numCell:{display:"flex",justifyContent:"flex-end"}};function C(e){var t=e.state,n=e.handleSorting,a=e.handlePagination,l=e.handleSearch,o=e.handleMobileColumn;return r.a.createElement(r.a.Fragment,null,t.isMobile?r.a.createElement(y,{handleMobileColumn:o,state:t}):null,r.a.createElement(p,{handleSearch:l}),r.a.createElement("table",{style:v.table},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement(f,{handleSorting:n,state:t}))),r.a.createElement("tbody",null,t.page.map(function(e,n){return t.isMobile?r.a.createElement("tr",{key:n},r.a.createElement("td",null,e.code),r.a.createElement("td",null,e.name),"value"===t.mobileColumn?r.a.createElement("td",null,r.a.createElement("div",{style:v.numCell},e[t.mobileColumn])):r.a.createElement("td",null,e[t.mobileColumn])):r.a.createElement("tr",{key:n},r.a.createElement("td",null,e.code),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.city),r.a.createElement("td",null,e.parameter),r.a.createElement("td",null,r.a.createElement("div",{style:v.numCell},e.value)),r.a.createElement("td",null,e.unit))})),r.a.createElement(h,{handlePagination:a,state:t})))}var k="https://api.openaq.org/v1/countries?limit=500",w="https://api.openaq.org/v1/measurements?parameter=pm25&order_by=parameter&sort=asc&country=",j=function(e,t,n){fetch(e,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then(function(e){e.ok?e.json().then(function(e){t(e.results,n)}):alert("Wyst\u0105pi\u0142 b\u0142\u0105d. Przepraszamy")}).catch(function(e){console.error(e)})},S=function(e,t){var n=[],a=[],r=function(t){a.push(fetch(w+e[t].code).then(function(e){return e.json()}).then(function(a){n.push(Object(i.a)({},e[t],a.results[0]))}).catch(function(e){return console.log(e)}))};for(var l in e)r(l);Promise.all(a).then(function(){var e=n.slice(0,10);t(function(t){return Object(i.a)({},t,{data:n,page:e})})})},O=function(e){j(k,S,e)},x=function(e,t){return e.sort(function(e,n){var a=e[t],r=n[t],l=0;return a>r?l=1:a<r&&(l=-1),l})},K=function(e,t,n){var a=e.data,r=e.sorting,l=e.pageEnd,o=l-10,c=[];if(t===e.sortingKey)switch(r){case null:var u=x(a,t);c=u.slice(o,l),n(function(e){return Object(i.a)({},e,{data:u,page:c,sorting:"asc",sortingKey:t})});break;case"asc":var s=function(e,t){return e.sort(function(e,n){var a=e[t],r=n[t],l=0;return a>r?l=-1:a<r&&(l=1),l})}(a,t);c=s.slice(o,l),n(function(e){return Object(i.a)({},e,{data:s,page:c,sorting:"desc",sortingKey:t})});break;default:u=x(a,t),c=u.slice(o,l),n(function(e){return Object(i.a)({},e,{data:u,page:c,sorting:"asc",sortingKey:t})})}else{var m=x(a,t);c=m.slice(o,l),n(function(e){return Object(i.a)({},e,{data:m,page:c,sorting:"asc",sortingKey:t})})}},M=function(e,t,n){var a=e.pageEnd,r=a-10,l=0,o=0,c=[];switch(t){case"prev":o=(l=(l=r-10)<0?0:l)+10,c=e.data.slice(l,o),n(function(e){return Object(i.a)({},e,{page:c,pageEnd:o})});break;case"next":l=r+10;var u=e.data.length-10;o=(l=l>u?u:l)+10,c=e.data.slice(l,o),n(function(e){return Object(i.a)({},e,{page:c,pageEnd:o})});break;default:c=e.data.slice(r,a),n(function(e){return Object(i.a)({},e,{page:c})})}},P=n(5),B=function(e,t,n){for(var a,r,l=e.data,o=[],c=0,u=l.length;c<u;c++)for(var s in r=l[c]){-1!=="".concat(r[s]).toLowerCase().indexOf(t.toLowerCase())&&o.push(r)}var m=Object(P.a)(new Set(o));a=m.slice(0,10),n(function(e){return Object(i.a)({},e,{page:a})})};var F=function(){var e=Object(a.useState)({data:[],page:[],pageEnd:10,sortingKey:null,sorting:null,isMobile:!1,mobileColumn:"city"}),t=Object(c.a)(e,2),n=t[0],l=t[1];return Object(a.useEffect)(function(){O(l)},[]),Object(a.useLayoutEffect)(function(){var e=function(){window.innerWidth<1e3?l(function(e){return Object(i.a)({},e,{isMobile:!0})}):l(function(e){return Object(i.a)({},e,{isMobile:!1})})};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}},[]),r.a.createElement("div",{className:"App"},r.a.createElement(C,{state:n,handleSorting:function(e){K(n,e,l)},handlePagination:function(e){M(n,e,l)},handleSearch:function(e){var t=e.target.value;B(n,t,l)},handleMobileColumn:function(e){l(function(t){return Object(i.a)({},t,{mobileColumn:e})})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)})}],[[6,1,2]]]);
//# sourceMappingURL=main.b2c3bcee.chunk.js.map